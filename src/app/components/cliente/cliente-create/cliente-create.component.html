<div class="container-wrapper">
  <nz-spin [nzSpinning]="carregando">
    <div class="container">
      <nz-card [nzBordered]="false" class="form-container">
        <h2 class="form-title">Cadastro de Cliente</h2>
        <form
          nz-form
          nzLayout="vertical"
          [formGroup]="clienteForm"
          (ngSubmit)="criar()"
          class="formulario"
        >
          <!-- Abas para separar as seções -->
          <nz-tabset [(nzSelectedIndex)]="currentTabIndex">
            <!-- Aba: Dados Pessoais -->
            <nz-tab nzTitle="Dados Pessoais">
              <div>
                <nz-form-item>
                  <nz-form-label [nzRequired]="true" nzFor="nome"
                    >Nome</nz-form-label
                  >
                  <nz-form-control>
                    <input
                      id="nome"
                      nz-input
                      formControlName="nome"
                      placeholder="Digite seu nome"
                      required
                    />
                  </nz-form-control>
                </nz-form-item>

                <nz-form-item>
                  <nz-form-label [nzRequired]="true" nzFor="email"
                    >E-mail</nz-form-label
                  >
                  <nz-form-control>
                    <input
                      id="email"
                      nz-input
                      type="email"
                      formControlName="email"
                      placeholder="Digite seu e-mail"
                      required
                    />
                  </nz-form-control>
                </nz-form-item>

                <div nz-row [nzGutter]="16"></div>
                <nz-form-item>
                  <nz-form-label [nzRequired]="true" nzFor="telefone"
                    >Telefone</nz-form-label
                  >
                  <nz-form-control>
                    <input
                      id="telefone"
                      nz-input
                      mask="(00) 0 0000-0000"
                      formControlName="telefone"
                      placeholder="Digite seu telefone"
                      required
                    />
                  </nz-form-control>
                </nz-form-item>

                <nz-form-item>
                  <nz-form-label [nzRequired]="true" nzFor="cpf"
                    >CPF</nz-form-label
                  >
                  <nz-form-control>
                    <input
                      id="cpf"
                      nz-input
                      mask="000.000.000-00"
                      formControlName="cpf"
                      placeholder="Digite seu CPF"
                      required
                    />
                  </nz-form-control>
                </nz-form-item>

                <nz-form-item>
                  <nz-form-label [nzRequired]="true" nzFor="dataNascimento"
                    >Data de Nascimento</nz-form-label
                  >
                  <nz-form-control>
                    <nz-date-picker
                      id="dataNascimento"
                      formControlName="dataNascimento"
                      nzPlaceHolder="Selecione a data de nascimento"
                      required
                    ></nz-date-picker>
                  </nz-form-control>
                </nz-form-item>

                <nz-form-item>
                  <nz-form-label [nzRequired]="true" nzFor="senha"
                    >Senha</nz-form-label
                  >
                  <nz-form-control>
                    <nz-input-group [nzSuffix]="suffixIcon">
                      <input
                        id="senha"
                        nz-input
                        [type]="hide ? 'password' : 'text'"
                        formControlName="senha"
                        placeholder="Digite sua senha"
                        required
                      />
                    </nz-input-group>
                    <ng-template #suffixIcon>
                      <i
                        nz-icon
                        [nzType]="hide ? 'eye-invisible' : 'eye'"
                        (click)="hide = !hide"
                        tabindex="0"
                      ></i>
                    </ng-template>
                  </nz-form-control>
                </nz-form-item>

                <nz-form-item>
                  <nz-form-label [nzRequired]="true" nzFor="confirmarSenha"
                    >Confirmar Senha</nz-form-label
                  >
                  <nz-form-control>
                    <input
                      id="confirmarSenha"
                      nz-input
                      type="password"
                      formControlName="confirmarSenha"
                      placeholder="Confirme sua senha"
                      required
                      (blur)="verificarSenhasIguais()"
                    />
                  </nz-form-control>
                </nz-form-item>

                <div class="form-actions">
                  <button
                    type="button"
                    nz-button
                    nzType="primary"
                    (click)="nextTab()"
                  >
                    Próximo
                  </button>
                </div>
              </div>
            </nz-tab>

            <!-- Aba: Endereço -->
            <nz-tab nzTitle="Endereço">
              <div>
                <nz-form-item>
                  <nz-form-label [nzRequired]="true" nzFor="cep"
                    >CEP</nz-form-label
                  >
                  <nz-form-control>
                    <input
                      id="cep"
                      nz-input
                      mask="00000-000"
                      formControlName="cep"
                      placeholder="Digite o CEP"
                      required
                    />
                  </nz-form-control>
                </nz-form-item>

                                <nz-form-item>
                  <nz-form-label [nzRequired]="true" nzFor="numero"
                    >Número</nz-form-label
                  >
                  <nz-form-control>
                    <input
                      id="numero"
                      nz-input
                      formControlName="numero"
                      placeholder="Digite o número"
                      required
                    />
                  </nz-form-control>
                </nz-form-item>

                <nz-form-item>
                  <nz-form-label [nzRequired]="true" nzFor="rua"
                    >Rua</nz-form-label
                  >
                  <nz-form-control>
                    <input
                      id="rua"
                      nz-input
                      formControlName="rua"
                      placeholder="Digite sua rua"
                      required
                    />
                  </nz-form-control>
                </nz-form-item>

                <nz-form-item>
                  <nz-form-label [nzRequired]="true" nzFor="bairro"
                    >Bairro</nz-form-label
                  >
                  <nz-form-control>
                    <input
                      id="bairro"
                      nz-input
                      formControlName="bairro"
                      placeholder="Digite o bairro"
                      required
                    />
                  </nz-form-control>
                </nz-form-item>

                <nz-form-item>
                  <nz-form-label [nzRequired]="true" nzFor="cidade"
                    >Cidade</nz-form-label
                  >
                  <nz-form-control>
                    <input
                      id="cidade"
                      nz-input
                      formControlName="cidade"
                      placeholder="Digite a cidade"
                      required
                    />
                  </nz-form-control>
                </nz-form-item>

                <nz-form-item>
                  <nz-form-label [nzRequired]="true" nzFor="estado"
                    >Estado</nz-form-label
                  >
                  <nz-form-control>
                    <input
                      id="estado"
                      nz-input
                      formControlName="estado"
                      placeholder="Digite o estado"
                      required
                    />
                  </nz-form-control>
                </nz-form-item>

                <div class="form-actions">
                  <button type="button" nz-button (click)="previousTab()">
                    Voltar
                  </button>
                  <button
                    type="button"
                    nz-button
                    nzType="primary"
                    (click)="nextTab()"
                  >
                    Próximo
                  </button>
                </div>
              </div>
            </nz-tab>

            <!-- Aba: Confirmação -->
            <nz-tab nzTitle="Confirmação">
              <div class="confirmacao">
                <h3>Confirme os dados preenchidos:</h3>
                <p>
                  <strong>Nome:</strong> {{ clienteForm.get("nome")?.value }}
                </p>
                <p>
                  <strong>E-mail:</strong> {{ clienteForm.get("email")?.value }}
                </p>
                <p>
                  <strong>Telefone:</strong>
                  {{ clienteForm.get("telefone")?.value | telefone }}
                </p>
                <p>
                  <strong>CPF:</strong>
                  {{ clienteForm.get("cpf")?.value | CPF }}
                </p>
                <p>
                  <strong>Data de Nascimento:</strong>
                  {{
                    clienteForm.get("dataNascimento")?.value
                      | date : "dd/MM/yyyy"
                  }}
                </p>
                <p><strong>Rua:</strong> {{ clienteForm.get("rua")?.value }}</p>
                <p>
                  <strong>Número:</strong>
                  {{ clienteForm.get("numero")?.value }}
                </p>
                <p>
                  <strong>Bairro:</strong>
                  {{ clienteForm.get("bairro")?.value }}
                </p>
                <p>
                  <strong>Cidade:</strong>
                  {{ clienteForm.get("cidade")?.value }}
                </p>
                <p>
                  <strong>Estado:</strong>
                  {{ clienteForm.get("estado")?.value }}
                </p>
                <p>
                  <strong>CEP:</strong>
                  {{ clienteForm.get("cep")?.value | cep }}
                </p>

                <div class="form-actions">
                  <button type="button" nz-button (click)="previousTab()">
                    Voltar
                  </button>
                  <button
                    type="button"
                    nz-button
                    nzType="default"
                    (click)="cancelar()"
                  >
                    Cancelar
                  </button>
                  <button
                    type="submit"
                    nz-button
                    nzType="primary"
                    [disabled]="!clienteForm.valid || carregando"
                    [nzLoading]="carregando"
                  >
                    Confirmar
                  </button>
                </div>
              </div>
            </nz-tab>
          </nz-tabset>
        </form>
      </nz-card>
    </div>
  </nz-spin>
</div>
